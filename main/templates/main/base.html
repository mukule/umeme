{% load static %}

<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <title>Kengen Careers Portal</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <!-- App favicon -->
        <link rel="shortcut icon" href="{% static 'dashboard/images/icon.png' %}" type="image/x-icon">
       

        <script src="{% static 'invoice/js/jquery.min.js' %}"></script>
        <!-- App css -->
        <link rel="stylesheet" href="{% static 'dashboard/css/bootstrap.min.css' %}" type="text/css">
        <link rel="stylesheet" href="{% static 'dashboard/css/icons.min.css' %}" type="text/css">
        <link rel="stylesheet" href="{% static 'dashboard/css/theme.min.css' %}" type="text/css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="{% static 'chartjs-plugin-datalabels.js' %}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
        <script src="https://cdn.ckeditor.com/4.16.2/standard/ckeditor.js"></script>
        <style>
          /* Style for the alert container */
            #alert-container {
                position: fixed;
                top: 50px; /* Adjust the top position as needed */
                right: 10px; /* Adjust the right position as needed */
                z-index: 9999; /* Ensure the alerts appear above other content */
            }

            /* Style for individual alert messages */
            .alert {
                /* Other styles for your alerts (success, error, info, warning) */
                /* Adjust the margin or padding to create separation between alerts */
                margin-bottom: 10px; /* Adjust the margin as needed */
                /* Ensure the alerts have a transparent background to overlay other content */
                /* Optionally, add box-shadow or border for a visual distinction */
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
                /* Add padding or other styles to the alerts as needed */
                padding: 10px;
            }

            


        </style>
  

    </head>

<body>
    {% include 'main/includes/navbar.html' %}
    {% include '../main/includes/messaging.html' %}
    
    {% block content %}
    
    {% endblock content %}
    {% include '../main/includes/footer.html' %}
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- App js -->
    <script src="{% static 'manage/js/theme.css' %}"></script>
    <script src="{% static 'dashboard/js/car_form.js' %}"></script>
    <script src="{% static 'dashboard/js/pages/chartjs-demo.js' %}"></script>

    <script src="{% static 'invoice/js/jspdf.debug.js' %}"></script>
    <script src="{% static 'invoice/js/html2canvas.min.js' %}"></script>
    <script src="{% static 'invoice/js/html2pdf.min.js' %}"></script>
    <script>
        // JavaScript to toggle password visibility
        document.querySelectorAll('.toggle-password').forEach(function(icon) {
            icon.addEventListener('click', function() {
                var input = icon.closest('.input-group').querySelector('input');
                if (input.type === 'password') {
                    input.type = 'text';
                } else {
                    input.type = 'password';
                }
            });
        });
    </script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Get the JSON data from the template context
        var jsonData = JSON.parse('{{ job_disciplines_with_counts_json|escapejs }}');
    
        // Extract data for labels and values
        var labels = jsonData.map(function(item) {
            return item.name;
        });
    
        var dataValues = jsonData.map(function(item) {
            return item.vacancy_count;
        });
    
        // Generate random colors for the bars
        var colors = labels.map(function() {
            return '#' + (Math.random().toString(16) + '0000000').slice(2, 8);
        });
    
        
        ctx = document.getElementById("vacancyChart").getContext("2d");
        var vacancyChart = new Chart(ctx, {
            type: "bar",
            data: {
                labels: labels,
                datasets: [{
                    label: "Vacancies created",
                    data: dataValues,
                    backgroundColor: colors,
                }],
            },
            options: {
                plugins: {
                    datalabels: {
                        color: 'black', // Label text color
                        anchor: 'end', // Position of the label
                        align: 'top', // Alignment of the label
                        formatter: function(value) {
                            return value; // Display the value as the label
                        },
                    },
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true,
                        },
                    }],
                },
            },
        });
    });
    </script>

    <!-- Add this script to your HTML template -->
<script>
    // Get the JSON data for the pie chart from the template context
    var pieChartData = JSON.parse('{{ pie_chart_data_json|escapejs }}');

    // Extract data for labels and values
    var labels = ['Open Vacancies', 'Closed Vacancies'];
    var dataValues = [pieChartData.open_vacancy_count, pieChartData.closed_vacancy_count];

    // Define custom colors for the pie chart
    var colors = ['#33FF45', '#FF5733'];

    // Create the Chart.js pie chart
    var ctx = document.getElementById('vacancyPieChart').getContext('2d');
    var vacancyPieChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: labels,
            datasets: [{
                data: dataValues,
                backgroundColor: colors,
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            legend: {
                display: true,
                position: 'right',
            },
            title: {
                display: true,
                text: 'Open and Closed Vacancies',
                position: 'bottom',
                fontSize: 16,
            },
            plugins: {
                datalabels: {
                    display: true, // Display labels on each section
                    color: 'white', // Color of the labels
                    font: {
                        size: 14 // Font size of the labels
                    },
                    formatter: function(value, context) {
                        return value + ' vacancies'; // Format the label to include "vacancies"
                    }
                }
            },
        }
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var data = {{ data_json|safe }};
        var ctx = document.getElementById("barChart").getContext("2d");

        new Chart(ctx, {
            type: "bar",
            data: {
                labels: data.labels,
                datasets: [
                    {
                        label: "Counts",
                        data: data.data,
                        backgroundColor: [
                            "rgba(255, 99, 132, 0.2)",
                            "rgba(54, 162, 235, 0.2)",
                            "rgba(255, 206, 86, 0.2)",
                        ],
                        borderColor: [
                            "rgba(255, 99, 132, 1)",
                            "rgba(54, 162, 235, 1)",
                            "rgba(255, 206, 86, 1)",
                        ],
                        borderWidth: 1,
                    },
                ],
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                    },
                },
            },
        });
    });
</script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        var data = {{ data_json|safe }};
        var ctx = document.getElementById("barChartv").getContext("2d");

        new Chart(ctx, {
            type: "bar",
            data: {
                labels: data.vacancy_data.map(item => item.vacancy_title),
                datasets: [
                    {
                        label: "Application Count",
                        data: data.vacancy_data.map(item => item.application_count),
                        backgroundColor: "rgba(54, 162, 235, 0.2)",
                        borderColor: "rgba(54, 162, 235, 1)",
                        borderWidth: 1,
                    },
                ],
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: "Application Count",
                        },
                    },
                    x: {
                        title: {
                            display: true,
                            text: "Vacancy",
                        },
                    },
                },
            },
        });
    });
</script>

<script>
    // Parse the JSON data from the view
    var graphData = {{ graph_data_json|safe }};

    // Get the canvas element and create a chart
    var ctx = document.getElementById('barGraphs').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: graphData.labels,
            datasets: [{
                label: 'Counts',
                data: graphData.data,
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Number of Applicants'
                    }
                }
            }
        }
    });
</script>
<script>
    CKEDITOR.replace('terms_text');
</script>

<script>
    $(document).ready(function () {
        // Initially hide the "Disability Number" field if "Disability" is not checked
        if (!$('#id_disability').is(':checked')) {
            $('#disability-number-field').hide();
        }

        // Add a change event handler to the "Disability" checkbox
        $('#id_disability').change(function () {
            if ($(this).is(':checked')) {
                // Show the "Disability Number" field if "Disability" is checked
                $('#disability-number-field').show();
            } else {
                // Hide the "Disability Number" field if "Disability" is not checked
                $('#disability-number-field').hide();
            }
        });
    });
</script>

<script>
    $(document).ready(function () {
        // Initially hide the "County" field
        $("#county-field").hide();
    
        // Add a change event handler to the "Country of Residence" dropdown
        $("#id_country_of_residence").change(function () {
            // Log the selected value for debugging
            console.log("Selected country: " + $(this).val());
            
            if ($(this).val() === "KE") {
                // Show the "County" field if "Kenya" is selected
                $("#county-field").show();
            } else {
                // Hide the "County" field if a country other than "Kenya" is selected
                $("#county-field").hide();
            }
        });
    });
</script>


<script>
    function showSection(sectionId, menuLink) {
        var sections = document.getElementsByClassName('resume-section');
        for (var i = 0; i < sections.length; i++) {
            sections[i].style.display = 'none';
        }
        var section = document.getElementById(sectionId);
        section.style.display = 'block';

        var menuItems = document.querySelectorAll('.resume-menu a');
        for (var i = 0; i < menuItems.length; i++) {
            menuItems[i].classList.remove('active');
        }

        menuLink.classList.add('active');
    }

    // Show the "Bio" section and its corresponding menu item as active on page load
    document.addEventListener("DOMContentLoaded", function () {
        showSection('review', document.querySelector('.resume-menu a'));
    });
</script>



<script>
    $(document).ready(function () {
        // Handle the confirmation when the modal is shown
        $('#confirmDeleteModal').on('show.bs.modal', function (e) {
            const applicationId = $(e.relatedTarget).data('application-id');
            const deleteUrl = "{% url 'vacancies:delete_application' 0 %}".replace('0', applicationId);
            $('#confirmDeleteButton').attr('href', deleteUrl);
        });
    });
</script>

<script>
    $(document).ready(function () {
        // Handle the confirmation when the modal is shown
        $('#confirmResubmitModal').on('show.bs.modal', function (e) {
            const applicationId = $(e.relatedTarget).data('application-id');
            const recallUrl = "{% url 'vacancies:recall_application' 0 %}".replace('0', applicationId);
            $('#confirmResubmitButton').attr('href', recallUrl);
        });
    });
</script>




</body>
</html>
