{% extends 'main/base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block content %}

<div class="page-content">
    <div class="container-fluid">
        <div class="col-12">
            <div class="page-title-box d-flex align-items-center justify-content-between">
                <h4 class="mb-0 font-size-18">Kengen</h4>

                <div class="page-title-right">
                    <ol class="breadcrumb m-0">
                        <li class="breadcrumb-item"><a href="javascript: void(0);">Dashboard</a></li>
                        <li class="breadcrumb-item active">Vacancy Reports</li>
                    </ol>
                </div>
                
            </div>
        </div>
      
        
        <div class="row">
            <div class="col-xl-6">
                <div class="card">
                    <div class="card-body">

                        <h4 class="card-title mb-4">This Graph shows the various job disclipnes with the number of vacancies created under them</h4>
                        <canvas id="vacancyChart"></canvas>

                       

                    </div> <!-- end card-body-->
                </div> <!-- end card-->
            </div> <!-- end col -->

            <div class="col-xl-6">
                <div class="card">
                    <div class="card-body">
                        <canvas id="vacancyPieChart"></canvas>
                    </div> <!-- end card-body-->
                </div> <!-- end card-->
            </div> <!-- end col -->
        </div>
        <!-- end row-->

      <div class="row">
        <div class="col-xl-12">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Applications</h4>
                    <p class="card-subtitle mb-4">Click on any vacancy applications to view its Report</p>

                    <div class="table-responsive">
                        {% if jobs %}
                            <table class="table table-hover mb-0">
                                <thead>
                                    <tr>
                                        <th>Ref No.</th>
                                        <th>Position</th>
                                        <th>Nature</th>
                                        <th>Discipline</th>
                                        <th>Posts Needed</th>
                                        <th>Start date</th>
                                        <th>End date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for vacancy in jobs %}
                                        <tr>
                                            <th scope="row">
                                                <a href="{% url 'hr:application_report' vacancy_id=vacancy.id %}">{{ vacancy.ref }}</a>
                                            </th>
                                            <td>{{ vacancy.title }}</td>
                                            <td>{{ vacancy.vacancy_type }}</td>
                                            <td>{{ vacancy.job_discipline }}</td>
                                            <td>{{ vacancy.posts_needed }}</td>
                                            <td>{{ vacancy.date_open }}</td>
                                            <td>{{ vacancy.date_close }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <p>No vacancy</p>
                        {% endif %}
                    </div>
                    
                </div>
                <!-- end card-body-->
            </div>
            <!-- end card -->

        </div>
      </div>

        
    </div>
</div>
{% endblock content %}

